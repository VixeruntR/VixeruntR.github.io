---
layout:     post   				    
title:      0-1背包问题				
subtitle:   
date:       2020-11-19 				
author:     WarmStar
header-img: img/blog2.jpg 	
catalog: true 				
tags:							
    - 算法
---



### 0-1背包问题:

前些天在力扣看到一道算法题，使用传统艺能暴力枚举解出后，超越了足足1.57%的提交者！于是翻阅大佬的题解，得知这道题目可以转化为`背包问题`求解，背包问题是`动态规划`算法中的经典案例，对它我除了会复制代码外知之甚少，网络上也没有找到比较细节和详尽的讲解，只有代码糊一脸 ͡[๏̯͡๏]  ，于是先仔细研究了一下最简单的`0-1背包问题`，记录此文。

##### 定义：

给定`n`个重量为 `w1, w2, w3, ..., wn`, 价值为 `v1, v2, v3, ..., vn` 的物品和容量为`c`的背包，求这些物品中一个最有价值的子集， 使得在满足背包的容量的前提下，包内物品的总价值最大。

这个问题其实就是说你去珠宝店抢劫，店里有很多单价不定，重量也不定的珠宝，你的背包只能装五斤，问你装哪些珠宝能 ~~判的时间最久~~ 卖的钱最多（๑ `▽´๑) 

##### 画图枚举：

初见这个问题可以先拿较少的几组数据推演，深入理解一下问题，这里举例:

背包容量`c=10`，珠宝数量`n=4`，重量`w`和价值`v`如下表

|  w   |  2   |  3   |  5   |  5   |
| :--: | :--: | :--: | :--: | :--: |
|  v   |  2   |  4   |  3   |  6   |

因为每个珠宝的状态只有`拿/不拿`两种，又因为背包容量只有10，用`si(i=1,2,3,4)`表示是否拿取这一状态，且`si`只能为`0或1`， 得出如下关系式:

```mathematica
2s1 + 3s2 + 5s3 + 5s4 <= 10			(si = 0/1)
```

得到的最终价值`F`显然为:

```mathematica
F = 2s1 + 4s2 + 3s3 + 6s4			(si = 0/1)
```

既然状态只有两种，可以用树状图表示出所有的拿取过程，来画树状图吧，上word！







##### 条件变量：

```
n = 4
c = 10
w = [2, 3, 5, 5]
v = [2, 4, 3, 7]
```

##### 递推关系式：

```mathematica
 F(i, j) = F(i-1, j)							(j < wi)                        F(i, j) = max{F(i-1, j), F(i-1, j-wi) + vi}				(j > wi)
```





1. 表中`i`表示可选择到第`i`个物品,  `j`表示可用的容量大小，表格中的数值`Ks(i, j)`表示`i, j`条件下可得到的最大价值。先将`i=0`的行与`j=0`列填入0。

[![DQnYwT.png](https://s3.ax1x.com/2020/11/20/DQnYwT.png)](https://imgchr.com/i/DQnYwT)

2. 当`i=1`时，即只有物品1可供选择，当容量足够(`j>=2`)，最大的价值就是物品1的价值。

   [![DQntTU.png](https://s3.ax1x.com/2020/11/20/DQntTU.png)](https://imgchr.com/i/DQntTU)

3. 当`i=2`时，有物品1和物品2可以选择，此时可代入递推关系式计算，以`i=2, j=3`为例：

   [![DQnJmV.png](https://s3.ax1x.com/2020/11/20/DQnJmV.png)](https://imgchr.com/i/DQnJmV)

4. 剩下的格子中的值继续使用递推关系式得出：

   [![DQn8O0.png](https://s3.ax1x.com/2020/11/20/DQn8O0.png)](https://imgchr.com/i/DQn8O0)

5. 当`i=4, j=10`时得到了最终结果13。根据结果可以反向找出选择了哪些物品:

   从`i=4, j=10`开始寻找，如果`Ks(i-1, j) == Ks(i, j)`，说明第`i`个物品没有被选中，

   从`Ks(i-1, j)`继续寻找。否则表示第`i`个物品被选中，则从`Ks(i-1, j-wi)`开始寻找。

   [![DQn3yq.jpg](https://s3.ax1x.com/2020/11/20/DQn3yq.jpg)](https://imgchr.com/i/DQn3yq)

   

